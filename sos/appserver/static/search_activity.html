<div class="help_style">

  <h1>Search Activity</h1>
  <p>This view lets you assess the search workload and the resource usage associated with it on the instances of your Splunk Enterprise deployment. It provides the following controls for measuring search activity:</p>

  <table>
    <tr>
      <td style="vertical-align:top; padding:6px; width:30%">
        <p><b>Instance to query</b><br />Select an instance in your deployment.</p>
      </td>
      <td style="vertical-align:top; padding:6px; width:35%">
        <p><b>Scope</b><br />Optionally, specifiy the type of search activity to measure:</p>
        <ul>
          <li><p><b>All</b><br />No scope specified, all searches are considered</p></li>
          <li><p><b>Mode</b><br />Real-time or historical</p></li>
          <li><p><b>Role</b><br />Search peer or search head</p></li>
          <li><p><b>Type</b><br />Ad hoc or scheduled</p></li>
        </ul>
      </td>
      
      <td sytle="vertical:align:top; padding:6px; width:35%">
        <p><b>Split choices</b><br />Select from the following:</p>
        <ul>
          <li><p><b>No split</b><br />No split</p></li>
          <li><p><b>Mode</b><br />Real-time or historical</p></li>
          <li><p><b>Type</b><br />Ad hoc or scheduled</p></li>
          <li><p><b>User</b><br />Splunk Enterprise user</p></li>
          <li><p><b>Role</b><br />Role assumed by the Splunk Enterprise instance when running searches</p></li>
          <li><p><b>Dispatcher</b><br />For searches dispatched remotely (role = search peer), this field reflects the search head that dispatched the search. For local searches, dispatcher is "self". </p></li>
        </ul>  
      </td>
      
    </tr>
  </table>
 
  <h2>Enable the ps_sos.sh (UNIX/Linux) or ps_sos.ps1 (Windows) scripted input</h2>
<p>You must enable the ps_sos.sh (UNIX/Linux) or ps_sos.ps1 (Windows) scripted inputs for this view to display any data. To enable this view, go to <a target="_blank" href="../../../manager/sos/data/inputs/script">Settings > Data Inputs > Scripts</a>, look for the following data input and enable it:</p>
  <p><code>$SPLUNK_HOME/etc/apps/sos/bin/ps_sos.sh</code> (on UNIX/Linux systems)</p>
  <p><code>$SPLUNK_HOME/etc/apps/sos/bin/ps_sos.ps1</code> (on Windows systems)</p>

  <p>On Windows systems, you must also enable local PowerShell script execution on servers on which the Add-on is installed. Review the Add-on's README for details.</p>
  <p>After you enable the scripted input, S.o.S gathers resource usage information, sending it to the <code>sos</code> index.</p>
  <p><b>Note: </b>The data gathered by this input counts against the daily licensed volume.</p>

  <h2>Panels available for this view</h2> 
  <h3>Search concurrency</h3>
  <p>View the concurrent search count over time for the instance chosen.
  
  <h3>Resource usage of searches</h3>
  <p>Shows the CPU usage or the amount of physical memory used in MB, aggregated for *all* search processes.</p>

<div style="position:relative; left:20px">
  <p style="text-decoration:underline">Interpreting resource usage statistics</p>
    <p>Some results in this panel are based on CPU usage percentage reported by the <code>ps</code> command. This metric is calculated by <code>ps</code> as:</p>
    <p><code>cputime/(lifetime of process)</code></p>
    <p>In the case of abrupt changes in long-running processes, such as splunkd or Splunk Web, the graph depicting CPU usage smoothes out over time instead of showing a sudden change. This does not apply to the line graph for search processes, as these data points represent aggregated values for all searches running during the observed time frame.</p>
    <p>CPU usage typically does not add up to 100% for multi-threaded processes such as splunkd, and in fact often exceeds that value.</p>
    <p>In addition, the resource usage for searches is aggregated from a sum of all processes running over the period of time in scope.</p>
    <p>As a rule of thumb, every 100% of CPU usage reported represents one full CPU core used.</p>
</div>
  
  <h3>Aggregate search run time</h3>
  <p>Shows the aggregate run time of searches attributable to *all* search processes, over time.</p>
  
  <h2>Searches used in this view</h2>  
  <p>
    Click the <b>View results</b> link in each panel to open the search in the Search view. You can inspect, modify, and export the search results from the Search view.
  </p>

</div>
