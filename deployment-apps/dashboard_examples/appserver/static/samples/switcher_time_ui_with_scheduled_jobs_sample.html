<link type="text/css" rel="stylesheet" href="/static/app/dashboard_examples/css/codemirror1.css" />
<link type="text/css" rel="stylesheet" href="/static/css/view.css" />
<link type="text/css" rel="stylesheet" href="/static/css/skins/default/default.css" />

<script type="text/javascript" src="/static/js/contrib/codemirror.js"></script>
<script type="text/javascript" src="/static/js/contrib/jquery-1.6.2.min.js"></script>


<script type="text/javascript">
$(function(){
   
   var textarea = $('#codeTextArea');
   
   CodeMirror.fromTextArea(textarea[0], {
        mode:'xml',
        readOnly: 'nocursor'
    });
    
});
</script>

<div style="background-color:white; padding-top:20px; padding-bottom: 20px; padding-left:10px">
<h1>Source code: Switcher with time controls</h1> 

<textarea id="codeTextArea">

<view template="dashboard.html" stylesheet="custom_css.css">
  <label>Switcher with time controls</label>
  <module name="AccountBar" layoutPanel="appHeader"/>
  <module name="AppBar" layoutPanel="navigationHeader"/>
  <module name="Message" layoutPanel="messaging">
    <param name="filter">*</param>
    <param name="clearOnJobDispatch">False</param>
    <param name="maxSize">1</param>
  </module>
  <module name="TitleBar" layoutPanel="viewHeader">
    <param name="actionsMenuFilter">dashboard</param>
  </module>
 
  <module name="ServerSideInclude" layoutPanel="panel_row1_col1">
    <param name="src">switcher_time_ui_with_scheduled_jobs.html</param>
  </module>

  <module name="PulldownSwitcher" layoutPanel="panel_row2_col1" group="Select a time range">
    <param name="mode">independent</param>
    <param name="label">Time range:</param>
    
    <!-- 
      For HiddenSavedSearch, useHistory is Auto. This means it picks up a previously run 
      job from the scheduler if one exists. 
    
    The Dashboard Examples contains a scheduled saved search with a time range of 15 minutes.
    -->
    <module name="HiddenSavedSearch" autoRun="true" layoutPanel="panel_row2_col1" group="Last 15 minutes">
      <param name="savedSearch">Sample scheduled search</param>
      <param name="useHistory">Auto</param>
      <module name="HiddenChartFormatter">
        <param name="chartTitle">Last 15 minutes</param>
        <param name="chart">column</param>
        <param name="primaryAxisTitle.text">yAxisTtile</param>
        <param name="secondaryAxisTitle.text">xAxisTitle</param>
        <param name="legend.placement">none</param>
        <module name="JobProgressIndicator"/>
        <module name="JSChart">
        </module> <!-- JSChart -->
      </module> <!-- HiddenChartFormatter -->
    </module> <!-- HiddenSavedSearch -->

    <!-- 
     Now, useHistory is False. This means it does not use a previously run job.
     Instead it dispatches the same scheduled search used in the previous HiddenSavedSearch module. 

      The nested HiddenSearch module specifies the time range to be the last hour
    -->
    <module name="HiddenSavedSearch" autoRun="true" layoutPanel="panel_row2_col1" group="Last hour">
      <param name="savedSearch">Sample scheduled search</param>
      <param name="useHistory">False</param>
      <module name="HiddenSearch">
        <param name="earliest">-1h@h</param>
        <param name="latest">@h</param>
        <module name="HiddenChartFormatter">
          <param name="chartTitle">Last hour</param>
          <param name="chart">column</param>
          <param name="primaryAxisTitle.text">yAxisTtile</param>
          <param name="secondaryAxisTitle.text">xAxisTitle</param>
          <param name="legend.placement">none</param>
          <module name="JobProgressIndicator"/>
          <module name="JSChart">
          </module> <!-- JSChart -->
        </module> <!-- HiddenChartFormatter -->
      </module> <!-- HiddenSearch -->
    </module> <!-- HiddenSavedSearch -->
    
    <!-- 
    See comment on the block above.
    -->
    <module name="HiddenSavedSearch" autoRun="true" layoutPanel="panel_row2_col1" group="Last 6 hours">
      <param name="savedSearch">Sample scheduled search</param>
      <param name="useHistory">False</param>
      <module name="HiddenSearch">
        <param name="earliest">-6h@h</param>
        <param name="latest">@h</param>
        <module name="HiddenChartFormatter">
          <param name="chartTitle">Last 6 hours</param>
          <param name="chart">column</param>
          <param name="primaryAxisTitle.text">yAxisTtile</param>
          <param name="secondaryAxisTitle.text">xAxisTitle</param>
          <param name="legend.placement">none</param>
          <module name="JobProgressIndicator"/>
          <module name="JSChart">
          </module> <!-- JSChart -->
        </module> <!-- HiddenChartFormatter -->
      </module> <!-- HiddenSearch -->
    </module> <!-- HiddenSavedSearch -->
    
  </module> <!-- PulldownSwitcher -->
  
  <module name="ServerSideInclude" layoutPanel="panel_row3_col1">
    <param name="src">switcher_time_ui_with_scheduled_jobs_layout.html</param>
  </module>
  
</view>

</textarea>
</div>

