<link type="text/css" rel="stylesheet" href="/static/app/dashboard_examples/css/codemirror1.css" />
<link type="text/css" rel="stylesheet" href="/static/css/view.css" />
<link type="text/css" rel="stylesheet" href="/static/css/skins/default/default.css" />

<script type="text/javascript" src="/static/js/contrib/codemirror.js"></script>
<script type="text/javascript" src="/static/js/contrib/jquery-1.6.2.min.js"></script>


<script type="text/javascript">
$(function(){
   
   var textarea = $('#codeTextArea');
   
   CodeMirror.fromTextArea(textarea[0], {
        mode:'xml',
        readOnly: 'nocursor'
    });
    
});
</script>

<div style="background-color:white; padding-top:20px; padding-bottom: 20px; padding-left:10px">
<h1>Source code: Multi-panel linked form search</h1> 

<textarea id="codeTextArea">

<form>
  <label>Panel-defined search</label>

  <fieldset>
          
      <!-- define a common form search input that will be used by all panels
          below that implement a searchTemplate node -->
      <input type="text" token="sourcetypeToken">
          <label>sourcetype</label>
          <default>*</default>
          <seed>splunkd</seed>
      </input>

      <input type="time">
        <default>Last 4 hours</default>
      </input>

  </fieldset>
      
  <row>
      <chart>
          <title>KB Indexed over time</title>
          <searchTemplate>
            index=_internal source=*metrics.log group="per_sourcetype_thruput" series="$sourcetypeToken$"
            | timechart sum(kb)
          </searchTemplate>
          <option name="charting.chart">column</option>
          <option name="charting.primaryAxisTitle.text">Sourcetype</option>
          <option name="charting.secondaryAxisTitle.text">KB Indexed</option>
          <option name="charting.legend.placement">none</option>
      </chart>
      <chart>
          <title>Average events per second over time</title>
          <searchTemplate>
            index=_internal source=*metrics.log group="per_sourcetype_thruput" series="$sourcetypeToken$"
            | timechart avg(eps)
          </searchTemplate>
          <option name="charting.chart">area</option>
          <option name="chart.stackMode">stacked</option>
          <option name="charting.primaryAxisTitle.text">Sourcetype</option>
          <option name="charting.secondaryAxisTitle.text">Events per second</option>
          <option name="charting.legend.placement">none</option>
      </chart>
  </row>

  <row>
      <table>
          <title>average kbps over time</title>
          <searchTemplate>
            index=_internal source=*metrics.log group="per_sourcetype_thruput" series="$sourcetypeToken$"
            | timechart avg(kbps)
          </searchTemplate>
          <option name="count">20</option>
      </table>
  </row>
  
</form>
</textarea>
</div>

